<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–‡åˆ›æ¯æ—¥æ‰‹è´¦</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Noto Sans SC',sans-serif;background:#faf7f2;color:#2c3e50;}
    .hero-title{font-family:'Playfair Display',serif;background:linear-gradient(135deg,#d4af37 0%,#f39c12 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .nav-blur{backdrop-filter:blur(20px);background:rgba(255,255,255,.95);border-bottom:1px solid #e8e9ea;box-shadow:0 2px 20px rgba(0,0,0,.08);}

    /* ====== æ‰“å¡å°æ—¥å† ====== */
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;}
    .cal-day{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;font-size:13px;transition:all .2s ease;position:relative;}
    .cal-today{background:#fde68a;color:#854d0e;font-weight:600;}
    .cal-checked{background:#d4af37;color:#fff;}
    .cal-checked::after{content:'âœ“';position:absolute;font-size:10px;margin-top:14px;}

    /* ====== å¡ç‰‡æ¯›ç»ç’ƒå…¨å±èƒŒæ™¯ ====== */
    .card{
      position:relative;
      border-radius:20px;
      overflow:hidden;
      margin-bottom:20px;
      cursor:pointer;
      transition:all .35s ease;
      box-shadow:0 8px 32px rgba(0,0,0,.08);
    }
    .card:hover{transform:translateY(-4px) rotate(.8deg);box-shadow:0 12px 40px rgba(0,0,0,.12);}
    .card-bg{
      position:absolute;inset:0;
      background-size:cover;background-position:center;
      filter:blur(20px) brightness(1.05);
      transform:scale(1.1);
      z-index:1;
    }
    .card-overlay{
      position:absolute;inset:0;
      background:linear-gradient(to bottom, rgba(255,255,255,0.35) 30%, rgba(255,255,255,0.85) 70%);
      z-index:2;
    }
    .card-content{position:relative;z-index:3;display:flex;flex-direction:column;height:340px;}
    .card-top{flex:1;padding:24px 24px 0;}
    .card-cal-bar{height:60px;background:rgba(255,255,255,0.7);border-top:1px solid rgba(255,255,255,0.5);display:flex;align-items:center;justify-content:center;gap:12px;font-size:12px;color:#4a4438;}
    .card-cal-month{font-weight:600;letter-spacing:1px;}
    .card-cal-day{font-size:18px;font-weight:700;}
    .card-cal-week{font-weight:500;}
    .card-title{font-size:1.2rem;font-weight:600;color:#2c3e50;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
    .card-summary{font-size:.85rem;color:#4b5563;margin:8px 0;line-height:1.7;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;}
    .card-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px;}
    .card-tag{background:rgba(212,175,55,0.15);color:#8c7d61;padding:3px 8px;border-radius:999px;font-size:11px;}
  </style>
</head>
<body class="antialiased">
<!-- å¯¼èˆª -->
<nav class="fixed top-0 w-full z-50 nav-blur">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <h1 class="text-2xl font-bold hero-title">æ–‡åˆ›æ¯æ—¥æ‰‹è´¦</h1>
      <div class="hidden md:flex items-baseline space-x-8 text-sm font-medium">
        <a href="index.html" class="text-gray-900 hover:text-yellow-600">é¦–é¡µ</a>
        <a href="news.html" class="text-gray-600 hover:text-yellow-600">æ–°é—»è¯¦æƒ…</a>
        <a href="trends.html" class="text-gray-600 hover:text-yellow-600">è¶‹åŠ¿åˆ†æ</a>
        <a href="about.html" class="text-gray-600 hover:text-yellow-600">å…³äºæˆ‘ä»¬</a>
      </div>
    </div>
  </div>
</nav>

<!-- Hero -->
<section class="pt-24 pb-16 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto text-center">
    <h1 class="text-5xl md:text-6xl font-bold hero-title mb-6">æ–‡åˆ›æ¯æ—¥æ‰‹è´¦</h1>
    <p class="text-xl text-gray-600 mb-8">æ¯å¤©ååˆ†é’Ÿï¼Œä¸€èµ·å­¦ä¹ æ–‡åˆ›å¸‚åœºåŠ¨æ€</p>

    <!-- æ‰“å¡å°æ—¥å† -->
    <div class="inline-block bg-white/70 rounded-2xl p-4 shadow">
      <div class="text-sm text-gray-700 font-semibold mb-2" id="calTitle"></div>
      <div class="cal-grid" id="calGrid"></div>
    </div>
    <!-- æ‰“å¡æŒ‰é’® -->
    <button id="checkBtn" class="mt-4 check-in-btn">ä»Šæ—¥æ‰“å¡</button>
    <div id="checkTxt" class="mt-2 text-sm text-gray-500">æŒç»­è¾“å…¥ï¼Œä¿æŒæ•é”</div>
  </div>
</section>

<!-- æ–°é—»åˆ—è¡¨ -->
<section class="py-16 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">æœ€æ–°æ–‡åˆ›åŠ¨æ€</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5" id="cardGrid">
      <!-- JS æ³¨å…¥ -->
    </div>
  </div>
</section>

<!-- é¡µè„š -->
<footer class="py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white">
  <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
    <div>
      <h3 class="text-2xl font-bold hero-title mb-4">æ–‡åˆ›æ¯æ—¥æ‰‹è´¦</h3>
      <p class="text-gray-600 mb-4">æ¯å¤©ååˆ†é’Ÿï¼Œä¸€èµ·å­¦ä¹ æ–‡åˆ›å¸‚åœºåŠ¨æ€</p>
      <p class="text-gray-400">Â© 2025 é³è¿¹æ–‡åŒ–åˆ›æ„æœ‰é™å…¬å¸ ç‰ˆæƒæ‰€æœ‰</p>
    </div>
    <div>
      <h4 class="font-semibold mb-4 text-gray-800">è”ç³»æˆ‘ä»¬</h4>
      <div class="space-y-1 text-gray-600"><p>ğŸ“ 86-18210095234</p><p>ğŸ“ åŒ—äº¬å¸‚ä¸œåŸåŒºç¯çƒè´¸æ˜“å¤§å¦Aåº§3å±‚</p><p>ğŸ“§ mistoraworld@163.com</p></div>
    </div>
    <div>
      <h4 class="font-semibold mb-4 text-gray-800">å…³æ³¨æˆ‘ä»¬</h4>
      <p class="text-gray-600">è·å–æœ€æ–°æ–‡åˆ›èµ„è®¯å’Œå¸‚åœºåŠ¨æ€</p>
    </div>
  </div>
</footer>

<script>
/* ========== æ‰“å¡å°æ—¥å† ========== */
const today=new Date(),y=today.getFullYear(),m=today.getMonth();
function renderCal(){
  const days=new Date(y,m+1,0).getDate(),first=new Date(y,m,1).getDay();
  let html='';
  for(let i=0;i<first;i++)html+='<div></div>';
  for(let d=1;d<=days;d++){
    const dateKey=`checkIn_${y}-${m+1}-${d}`;
    const checked=localStorage.getItem(dateKey)==='true';
    const isToday=d===today.getDate()&&m===today.getMonth()&&y===today.getFullYear();
    html+=`<div class="cal-day ${isToday?'cal-today':''} ${checked?'cal-checked':''}">${d}</div>`;
  }
  document.getElementById('calGrid').innerHTML=html;
  document.getElementById('calTitle').textContent=`${y}å¹´${m+1}æœˆ`;
}
renderCal();

/* ========== æ‰“å¡æŒ‰é’® ========== */
const key=`checkIn_${y}-${m+1}-${today.getDate()}`;
const btn=document.getElementById('checkBtn'),txt=document.getElementById('checkTxt');
if(localStorage.getItem(key)==='true'){btn.classList.add('checked');btn.textContent='å·²æ‰“å¡';txt.textContent='ä»Šæ—¥å·²å®Œæˆ';txt.classList.add('text-green-600','font-medium');}
btn.addEventListener('click',()=>{
  if(btn.classList.contains('checked'))return;
  localStorage.setItem(key,'true');
  btn.classList.add('checked');btn.textContent='å·²æ‰“å¡';
  txt.textContent='ä»Šæ—¥å·²å®Œæˆå­¦ä¹ ï¼Œæ˜æ—¥ç»§ç»­åŠ æ²¹ï¼';txt.classList.add('text-green-600','font-medium');
  renderCal(); // åˆ·æ–°æ—¥å† âœ…
});

/* ========== æ–°é—»å¡ç‰‡ ========== */
fetch('/data/posts.json')
  .then(r=>r.json())
  .then(list=>renderCards(list))
  .catch(console.error);

function renderCards(posts){
  const box=document.getElementById('cardGrid');
  box.innerHTML=posts.map(p=>`
  <div class="card" onclick="window.open('${p.originalUrl}','_blank')">
    <div class="card-bg" style="background-image:url('${p.image}')"></div>
    <div class="card-overlay"></div>
    <div class="card-content">
      <div class="card-top">
        <h3 class="card-title">${p.title}</h3>
        <p class="card-summary">${p.summary}</p>
        <div class="card-tags">${p.tags.map(t=>`<span class="card-tag">#${t}</span>`).join('')}</div>
      </div>
      <div class="card-cal-bar">
        <span class="card-cal-month">${p.date.split('-')[1]}</span>
        <span class="card-cal-day">${p.date.split('-')[2]}</span>
        <span class="card-cal-week">${new Date(p.date).toString().slice(0,3).toUpperCase()}</span>
      </div>
    </div>
  </div>`).join('');
}
</script>
</body>
</html>
